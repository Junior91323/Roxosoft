var Site={Init:function(){this.Handlers.Init()},Settings:{Order:{ActiveItem:{}}},Handlers:{Init:function(){$(".btnAddToCart").click(function(n){var t=$(this);n.preventDefault();Site.AddProductToCart(t)});$(".cart").on("click",".btnCreateOrder",function(n){var t=$(this);n.preventDefault();Site.CreateOrder()});$(".order").click(function(n){var t=$(this);n.preventDefault();Site.Settings.Order.ActiveItem&&$(Site.Settings.Order.ActiveItem).removeClass("active");Site.Settings.Order.ActiveItem=t;$(t).addClass("active");Site.LoadOrder(t)});$(".cart").on("click",".btnDeleteCartItem",function(n){var t=$(this);n.preventDefault();Site.DeleteCartItem(t)});$(".orderInfoWrapp").on("click",".btnCompleteOrder",function(n){var t=$(this);n.preventDefault();Site.CompleteOrder(t)})}},AddProductToCart:function(n){var t=$(n).closest("tr"),i=$(t).attr("uid"),r=$(t).find("#count").val(),u={ProductUid:i,Count:r};$.ajax({type:"POST",url:"/Cart/Create",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(u),success:function(n){n.code==200?($(t).find("#count").val("1"),Site.LoadCart()):alert(n.error)},failure:function(n){alert(n)}})},CreateOrder:function(){$.ajax({type:"POST",url:"/Order/Create",contentType:"application/json; charset=utf-8",dataType:"json",success:function(){Site.LoadCart()},failure:function(n){alert(n)}})},LoadCart:function(){$.ajax({type:"GET",url:"/Cart/List",contentType:"text/html",dataType:"html",success:function(n){Site.RenderCart(n)},failure:function(n){alert(n)}})},RenderCart:function(n){var t=$(".cart");$(t).html(n)},LoadOrder:function(n){var t=$(n).attr("id");$.ajax({type:"GET",url:"/Order/GetById?id="+t,contentType:"text/html",dataType:"html",success:function(n){Site.RenderOrder(n)},failure:function(n){alert(n)}})},RenderOrder:function(n){if(n){var t=$(".orderInfoWrapp");$(t).html(n)}},CompleteOrder:function(n){var t=$(n).attr("id");$.ajax({type:"PUT",url:"/Order/Complete?id="+t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t.code==200?Site.LoadOrder(n):alert(t.error)},failure:function(n){alert(n)}})},DeleteCartItem:function(n){var t=$(n).attr("uid");$.ajax({type:"DELETE",url:"/Cart/Delete?uid="+t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n.code==200&&Site.LoadCart()},failure:function(n){alert(n)}})}};